<p align="center">
  <img src="resources/icon_256.png" height="256">
  <h1 align="center">MessAuto</h1>
  <h4 align="center"> è‡ªåŠ¨æå–Macå¹³å°çš„çŸ­ä¿¡å’Œé‚®ç®±éªŒè¯ç </h4>
  <h4 align="center"> Automatic extraction of SMS verification code for Mac platform</h4>
<p align="center">
<a href="https://github.com/LeeeSe/MessAuto/blob/master/LICENSE.txt">
<img src="https://img.shields.io/github/license/LeeeSe/messauto"
            alt="License"></a>
<a href="https://github.com/LeeeSe/MessAuto/releases">
<img src="https://img.shields.io/github/downloads/LeeeSe/messauto/total.svg"
            alt="Downloads"></a>
<a href="https://img.shields.io/badge/-macOS-black?&logo=apple&logoColor=white">
<img src="https://img.shields.io/badge/-macOS-black?&logo=apple&logoColor=white"
            alt="macOS"></a>
</p>

<p align="center">
  [<a href="./README.md">ä¸­æ–‡</a>] [<a href="docs/README-EN.md">English</a>]<br>
</p>

# MessAuto

MessAuto æ˜¯ä¸€æ¬¾ macOS å¹³å°è‡ªåŠ¨æå–çŸ­ä¿¡å’Œé‚®ç®±éªŒè¯ç çš„è½¯ä»¶ï¼Œç”± Rust å¼€å‘ï¼Œé€‚ç”¨äºä»»ä½• App

ä¸‹é¢å±•ç¤ºäº†åœ¨ MessAuto çš„è¾…åŠ©ä¸‹å®ŒæˆçŸ­ä¿¡ç™»å½•çš„è¿‡ç¨‹

https://github.com/LeeeSe/MessAuto/assets/44465325/6e0aca37-377f-463b-b27e-a12ff8c1e70b

ğŸ‰ğŸ‰ğŸ‰ MessAuto ç°åœ¨æ”¯æŒé‚®ä»¶ App

https://github.com/LeeeSe/MessAuto/assets/44465325/33dcec87-61c4-4510-a87c-ef43e69c4e9d

## ä½¿ç”¨æ–¹æ³•

MessAuto æ˜¯ä¸€ä¸ªæ²¡æœ‰ GUI çš„èœå•æ è½¯ä»¶ï¼Œç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶ MessAuto ä¼šå¼¹çª—å¼•å¯¼ç”¨æˆ·æˆæƒå®Œå…¨ç£ç›˜è®¿é—®æƒé™ï¼Œæˆäºˆæƒé™åç³»ç»Ÿä¼šè¦æ±‚é‡æ–°æ‰“å¼€è½¯ä»¶ï¼Œç‚¹å‡»å›¾æ ‡åˆ—å‡ºèœå•ï¼š

- è‡ªåŠ¨ç²˜è´´ï¼šå°†å‰ªè´´æ¿ä¸­çš„éªŒè¯ç æ¨¡æ‹Ÿé”®ç›˜è‡ªåŠ¨ç²˜è´´åˆ°è¾“å…¥æ¡†å†…
- è‡ªåŠ¨å›è½¦ï¼šåœ¨è‡ªåŠ¨ç²˜è´´éªŒè¯ç åå†å¸®ä½ æŒ‰ä¸‹å›è½¦é”®
- ä¸å ç”¨å‰ªè´´æ¿ï¼š MessAuto ä¼šæ¨¡æ‹Ÿé”®ç›˜ç›´æ¥è¾“å…¥éªŒè¯ç ï¼Œä¸å†å ç”¨å‰ªè´´æ¿
- ç›‘å¬çŸ­ä¿¡ï¼šå¼€å¯åå°†åŒæ—¶ç›‘å¬ Mac è‡ªå¸¦çš„ä¿¡æ¯å®¢æˆ·ç«¯ï¼ˆApp å¸¸é©»åå°æ•ˆæœæœ€å¥½ï¼Œå¦åˆ™ä¼šå»¶è¿Ÿå“åº”ï¼Œé MessAuto çš„é—®é¢˜ï¼‰
- ç›‘å¬é‚®ä»¶ï¼šå¼€å¯åå°†åŒæ—¶ç›‘å¬ Mac è‡ªå¸¦çš„é‚®ä»¶å®¢æˆ·ç«¯ï¼ˆåŒä¸Šï¼‰
- éšè—å›¾æ ‡ï¼šæš‚æ—¶éšè—èœå•æ å›¾æ ‡ï¼ŒApp é‡å¯åå°†å†æ¬¡æ˜¾ç¤ºï¼ˆå¯ç”¨æ´»åŠ¨ç›‘è§†å™¨ kill æ‰ï¼‰
- é…ç½®ï¼šå¿«é€Ÿæ‰“å¼€ TOML æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œå¯è‡ªå®šä¹‰æ­£åˆ™åŠå…³é”®è¯
- æ—¥å¿—ï¼šå¿«é€Ÿæ‰“å¼€æ—¥å¿—
- æ‚¬æµ®çª—ï¼šè·å¾—éªŒè¯ç æ—¶è‡ªåŠ¨åœ¨å…‰æ ‡å‘¨å›´å¼¹çª—ï¼Œå°†å¼ºåˆ¶è®¾å®šä¸º â€œä¸å ç”¨å‰ªè´´æ¿â€ çŠ¶æ€

> å…³é”®è¯: ä¹Ÿå«è§¦å‘è¯ï¼Œå½“ä¿¡æ¯ä¸­åŒ…å«å¦‚â€œéªŒè¯ç â€ç­‰å…³é”®è¯æ—¶ï¼Œç¨‹åºæ‰ä¼šæ‰§è¡Œä¸€ç³»åˆ—åç»­æ“ä½œï¼Œå¦åˆ™ä¼šå¿½ç•¥æ­¤æ¡ä¿¡æ¯

## ç‰¹ç‚¹

- åŒæ—¶æ”¯æŒ Mail.app å’Œ iMessage.app
- å¤šè¯­è¨€æ”¯æŒï¼šç›®å‰æ”¯æŒæ±‰è¯­ï¼Œè‹±è¯­ï¼ŒéŸ©è¯­ï¼Œå¾·è¯­ï¼›æ ¹æ®ç³»ç»Ÿè¯­è¨€è‡ªåŠ¨åˆ‡æ¢
- è½»é‡ï¼šç¨‹åºå ç”¨å­˜å‚¨ 8 Mï¼Œå ç”¨å†…å­˜ 14 M
- ç®€æ´ï¼šæ²¡æœ‰GUIï¼Œåªæœ‰ä¸€ä¸ªå®‰é™çš„ä»»åŠ¡æ æ‰˜ç›˜å›¾æ ‡ï¼Œä½†åŠŸèƒ½å¤Ÿç”¨
- é€‚ç”¨æ€§å¹¿ï¼šSafariæ–¹æ¡ˆåªèƒ½åœ¨Safariæµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œæ­¤è½¯ä»¶é€‚ç”¨äºä»»ä½• APP
- è‡ªåŠ¨åŒ–ï¼šè‡ªåŠ¨ç²˜è´´å›è½¦ï¼Œæˆ–å¼¹å‡ºæ‚¬æµ®çª—
- å¼€æºå…è´¹ï¼šæ”¶è´¹æ–¹æ¡ˆ[2FHey](https://2fhey.com/)è‡³å°‘éœ€è¦5ç¾å…ƒ


## æ³¨æ„

ARM64 ç‰ˆæœ¬æ‰“å¼€æ—¶ä¼šæç¤ºæ–‡ä»¶æŸåï¼Œå› å…¶éœ€è¦ Apple å¼€å‘è€…ç­¾åæ‰å¯ä»¥æ­£å¸¸å¯åŠ¨ï¼Œä½œè€…æ²¡æœ‰ Apple å¼€å‘è€…è¯ä¹¦ï¼Œä¸è¿‡ä½ ä»ç„¶å¯ä»¥é€šè¿‡ä¸€æ¡å‘½ä»¤è§£å†³é—®é¢˜ï¼š

- ç§»åŠ¨ MessAuto.app åˆ° `/Applications` æ–‡ä»¶å¤¹ä¸‹
- ç»ˆç«¯æ‰§è¡Œ`xattr -cr /Applications/MessAuto.app`


## TODO

- [ ] æ·»åŠ åº”ç”¨å†…æ›´æ–°
- [ ] æ·»åŠ å¾·è¯­æ”¯æŒ
- [ ] æ·»åŠ 
- [ ] å‘å¸ƒåˆ° Homebrew

## è¦æ±‚

- ä½¿ç”¨ **macOSç³»ç»Ÿ**ï¼Œå¹¶å¯ä»¥æ¥æ”¶ **iPhone** çš„çŸ­ä¿¡(å³æ‰“å¼€äº†â€œçŸ­ä¿¡è½¬å‘â€åŠŸèƒ½)
- é‚®ä»¶ App éœ€è¦å¸¸é©»åå°ï¼Œå¦åˆ™æ— æ³•å®æ—¶è·å–åˆ°æœ€æ–°çš„é‚®ä»¶
- å®Œå…¨ç£ç›˜è®¿é—®æƒé™ï¼ˆä¸ºäº†è®¿é—®ä½äº `ï½/Library` ä¸‹çš„ `Message.app` çš„ `chat.db` æ–‡ä»¶ï¼Œä»¥è·å–æœ€æ–°çš„çŸ­ä¿¡ï¼‰
- è¾…åŠ©åŠŸèƒ½æƒé™ï¼ˆæ¨¡æ‹Ÿé”®ç›˜æ“ä½œï¼‰
- è‡ªåŠ¨åŒ–æƒé™ï¼ˆæ¨¡æ‹Ÿé”®ç›˜æ“ä½œï¼Œä½ç½®ï¼šè®¾ç½®->å®‰å…¨æ€§ä¸éšç§->éšç§->è‡ªåŠ¨åŒ–ï¼Œæ­¤æƒé™åªèƒ½ç¨‹åºä¸»åŠ¨è¯·æ±‚ç”¨æˆ·åŒæ„ï¼Œç”¨æˆ·æ— æ³•ä¸»åŠ¨æˆäºˆï¼‰

## å·²çŸ¥ç¼ºé™·

- éƒ¨åˆ†APPæˆ–ç½‘ç«™ä¸æ”¯æŒå›è½¦ç™»é™†ï¼Œéœ€è¦æ‰‹åŠ¨ç‚¹å‡»ç™»é™†
- å¶å°”ä¼šå‡ºç°æœªçŸ¥ BUG åƒæ»¡å•æ ¸ CPUï¼ˆæš‚æ—¶æ²¡æ‰¾åˆ°å¤ç°æ¡ä»¶ï¼‰

## è‡ªè¡Œç¼–è¯‘

```bash
# ä¸‹è½½æºç 
git clone https://github.com/LeeeSe/MessAuto.git
cd MessAuto

# ç¼–è¯‘è¿è¡Œï¼ˆéå¿…éœ€ï¼Œä»…ç”¨äºå¼€å‘æµ‹è¯•ï¼‰
cargo run

# å®‰è£… cargo-bundle
cargo install cargo-bundle --git https://github.com/zed-industries/cargo-bundle.git --branch add-plist-extension
# æ‰“åŒ…åº”ç”¨
cargo bundle --release
```

ç”Ÿæˆçš„ MessAuto åº”ç”¨ä½äº `target/release/bundle/osx/MessAuto.app`ã€‚

## æ—¥å¿—ç›®å½•

æ—¥å¿—æ–‡ä»¶ç›®å½•ï¼š`~/.config/messauto/messauto.log`
ä»…ä¿ç•™æœ€è¿‘ä¸€æ¬¡å¯åŠ¨è½¯ä»¶çš„æ—¥å¿—

## å¸¸è§é—®é¢˜

- ç»™äº†æƒé™ä½†è¿˜æ˜¯å¼¹å‡ºæƒé™è¯·æ±‚ï¼šæš‚æ—¶çš„è§£å†³æ–¹æ³•æ˜¯ä»è®¾ç½®é¢æ¿çš„è¾…åŠ©åŠŸèƒ½å’Œç£ç›˜æƒé™åˆ—è¡¨ä¸­å°†åŸæ¥çš„ MessAuto é€šè¿‡ä¸‹é¢çš„"-"å·ç§»é™¤ï¼Œå½“å†æ¬¡å¼¹å‡ºæƒé™è¯·æ±‚æ—¶æ­£å¸¸åŒæ„å³å¯å·¥ä½œ

- æƒé™éƒ½ç»™äº†ï¼ŒéªŒè¯ç å¯ä»¥æå–åˆ°å‰ªè´´æ¿ä½†ä¸ä¼šè‡ªåŠ¨ç²˜è´´ï¼Œå¯èƒ½æ˜¯ç¨‹åºåˆæ¬¡è¯·æ±‚è‡ªåŠ¨åŒ–æƒé™ç”¨æˆ·æ‹’ç»æˆ–ç›´æ¥å¿½ç•¥äº†ï¼Œè¿™ä¸ªæƒé™çš„ä½ç½®åœ¨ï¼šè®¾ç½®->å®‰å…¨æ€§ä¸éšç§->éšç§->è‡ªåŠ¨åŒ–ï¼Œç”¨æˆ·æ— æ³•ç›´æ¥æ·»åŠ ï¼Œåªèƒ½é€šè¿‡ç¨‹åºå†æ¬¡è¯·æ±‚ï¼Œæ‰€ä»¥åªèƒ½é€šè¿‡é‡ç½®æƒé™çš„æ–¹å¼è§£å†³ï¼Œè¿è¡Œè¿™æ¡å‘½ä»¤å¹¶é‡å¯ç¨‹åºï¼š`tccutil reset AppleEvents com.doe.messauto`ï¼Œåå¤å‹¾é€‰è‡ªåŠ¨ç²˜è´´é€‰é¡¹æ¥è§¦å‘è‡ªåŠ¨åŒ–æƒé™è¯·æ±‚ï¼š`tccutil reset AppleEvents com.doe.messauto`

## æ„Ÿè°¢

- æ„Ÿè°¢ [@å°šå–„è‹¥æ‹™](https://sspai.com/post/73072) æä¾›è·å–çŸ­ä¿¡æ€è·¯
